---
title: 正则表达式如何部分替换匹配到的字符串
tags:
  - 正则表达式
categories: 前端
abbrlink: 4108081165
date: 2017-08-07 16:12:14
---

<!-- toc -->
<!-- more -->
# 1. 举例 替换手机号码中间部分

一个手机号13688886666，由于安全性，需要替换第4-7位字符串为星号，为136****6666。
找到字符串的正则表达式： `(\d{3})\d{4}(\d{4})`
替换使用的正则表达式： `$1****$2`

原理解析:
正则表达式中，替换字符串，括号的意思是分组，在替换中，可以使用$n(n为数字)来依次引用模式串中用括号定义的字串。
`"(\d{3})\d{4}(\d{4})"`的意思就是 ,用括号分为三段，(前3个数字，中间4个数字，最后4个数字)
`"$1****$2"`的意思就是，替换为，(第一组数值，保持不变$1；中间为*；第二组数值，保持不变$2)
一般将不需要替换的那部分用捕获（小括号括起来），替换时用$1加上新字符替换搜到的字符串。

# 2. 语法说明

- `( )`	标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 \( 和 \)。
- `$number`	把匹配的第number组替换成替换表达式
- `{n,}`	n 是一个非负整数。至少匹配n 次。例如，'o{2,}' 不能匹配 "Bob" 中的 'o'，但能匹配 "foooood" 中的所有 o。'o{1,}' 等价于 'o+'。'o{0,}' 则等价于 'o*'。
- 匹配中文字符的正则表达式： `[\u4e00-\u9fa5]`

- 在文本文件里, 这个表达式可以匹配所有的英文 : `/[ -~]/ ` ,注意:表达式中间有一个空格;

- 这个表达式可以匹配所有的非英文(比如中文) : `/[^ -~]/ `

# 3. Hexo 数学公式替换为math标签

Hexo中hexo-math插件使用的是标签的方式， 但是一般MathJax数学公式是`$`标记的。
所以最好把 `$数学公式$` 替换为math标签 ```{% math %} 数学公式{% endmath %}```，特别是矩阵，hexo-math会转换显示在一行，不好看
查找 ```([$])([ -~]{2,})([$]) ```
替换 ```{% math %}$2{% endmath %}```
针对begin矩阵
```([$])([ -~]*)(begin)([ -~]{3,})([$])```
```{% math %}$2$3$4{% endmath %}```

# 4. 参考文献
[实用正则表达式匹配和替换 - Mainz - 博客园](http://www.cnblogs.com/Mainz/archive/2009/03/14/1411359.html)
[js java正则表达式替换手机号4-7位为星*号 - _落雨 - 博客园](http://www.cnblogs.com/ae6623/p/4757099.html)
[匹配任意字符(包括中英文及中英文标点)的正则表达式 ](http://blog.csdn.net/love_legain/article/details/68488724)
[正则表达式 &#8211; 语法 | 菜鸟教程](http://www.runoob.com/regexp/regexp-syntax.html)
